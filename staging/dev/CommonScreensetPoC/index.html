<html>
    
	<head>
    
		<title>ELX Flow</title>
        
		<meta name="viewport" content="width=device-width">
        
		<script src="https://cdns.eu1.gigya.com/js/gigya.js?apikey=3_YcPOLtqNVZ3E4LH9m3teYcO6S8rikDQMIAy71GgmoCqDeJj3lPScSMZAX3L5vRiG" type="text/javascript"></script>
		
    </head>
    
	<body>
	
		
        <div id="elxContainer"></div>

		<input type="submit" onclick="login()" value="Let's start our journey here">

        <input type="submit" onclick="logout()" value="Log me out">
        
        <script type="text/javascript" lang="javascript">// calls ELX Registration screen 
        
            var ACC = {};
            
            ACC.gigyaUserMode = 'raas';
                
            ACC.eluxGigyaSourceCode = '753';
                
            ACC.eluxGigyaLocale = 'en';
            
            ACC.eluxGigyaLanguages = 'EN';
                
            ACC.eluxGigyaCountry = 'GB';
        
            
            function handleHybrisLogin(res) {
                
                console.log("Handle Hybris login called -> ",res);
                    
                if (res.errorCode === 0) {
                
                    console.log("Inside response");
                
                    document.getElementById("hybris").innerHTML="Logged into CDC";
                
                } 
            
            }
                
            function loginHandler(response) {
                    
                console.log('Login handler Called', response);
                    
                gigya.hasSession().then(function(sessionExist) {
                        
                    if(sessionExist) {
                            
                        console.log("Session Exist");
                            
                        //gigya.accounts.getAccountInfo({ callback: handleHybrisLogin });
                    
                        gigya.accounts.showScreenSet({
                            screenSet: 'CommonScreenPoC-UpdateProfile',
                            startScreen:'gigya-new-update-profile-screen',
                            callback: handleHybrisLogin
                        });

                    } else{
                            
                        console.log("Session Does not Exist");
                        
                    }
                    
                });
                    
            }
            
            //register onlogin event handler
            gigya.socialize.addEventHandlers({ 
                onLogin: loginHandler
            });
                
            function errorLogin(res) {
            
                console.log('Inside error login', res);
                    
            }
                
            gigya.hasSession().then(function(sessionExist) {
            
                if(sessionExist) {
            
                    console.log("Session Exist");
            
                    //gigya.accounts.getAccountInfo({ callback: handleHybrisLogin });
            
                    gigya.accounts.showScreenSet({
                        screenSet: 'CommonScreenPoC-UpdateProfile',
                        startScreen:'gigya-new-update-profile-screen',
                        callback: handleHybrisLogin
                    });
                }	
                else{
                    console.log("Session Does not Exist");
                }
            
            });

            //function gets called on login button click
            function login() { 
                    
                var location = window.location.href;
                    
                gigya.accounts.showScreenSet({
                    screenSet: 'CommonScreenPoC',
                    startScreen:'gigya-common-screen',
                    //containerID:"elxContainer",
                    callback: errorLogin
                });

            }

            //function gets called on login button click
            function logout() { 
                    
                gigya.accounts.logout({
                    callback: errorLogin
                });

                window.location.reload();

            }
                
	    </script> 
    
	</body>

</html>
