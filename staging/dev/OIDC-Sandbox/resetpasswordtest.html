<!DOCTYPE html>

<html class="no-js">
  <head>
    <input type="hidden" value="2021-04-05 12:50" />

    <meta charset="utf-8" />

    <meta http-equiv="x-ua-compatible" content="ie=edge" />

    <meta http-equiv="cache-control" content="no-cache" />

    <meta http-equiv="expires" content="0" />

    <meta http-equiv="pragma" content="no-cache" />

    <title>Login</title>

    <meta name="description" content="Login" />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <script
      type="text/javascript"
      src="https://cdns.gigya.com/js/gigya.js?apiKey=4_jRIUbntYe8vK0uaLHDJQDg"
    ></script>

    <script>
      var cdcApiData = {
        brand: 'Default',
        language: 'en',
        returnUrl: ''
      }
      var urlSearchParamsObj;
	urlSearchParamsObj = getUrlParametersObj();
	cdcApiData.brand =   getBrandFromUrl(urlSearchParamsObj);
    	cdcApiData.language = getLanguageFromUrl(urlSearchParamsObj);
    	cdcApiData.returnUrl = getReturnUrlFromUrl(urlSearchParamsObj);

function getUrlParametersObj() {
  try {
    const queryString = window.location.search;
    const urlSearchParamsObj = new URLSearchParams(queryString);

    return urlSearchParamsObj;
  } catch (err) {
    throw new Error(`Can not create URL parameters object: ${err.message}`);
  }
}
 function getLanguageFromUrl(urlSearchParamsObj) {
  try {
    var language = 'en';

    if (urlSearchParamsObj && urlSearchParamsObj.has('lang')) {
      const fetchedLanguage = urlSearchParamsObj.get('lang');
      language = fetchedLanguage.substring(0,2).toLowerCase();
    }

    if (urlSearchParamsObj && urlSearchParamsObj.has('LANG')) {
      const fetchedLanguage = urlSearchParamsObj.get('LANG');
      language = fetchedLanguage.substring(0,2).toLowerCase();
    }

    return language;
  } catch (err) {
    throw new Error(`Can not get language: ${err.message}`);
  }
}
function getBrandFromUrl(urlSearchParamsObj) {
  try {
    var brand = "Default";

    if (urlSearchParamsObj && urlSearchParamsObj.has('brand')) {
      brand = urlSearchParamsObj.get('brand');
      if (brand.search(/\./)) {
        brand = brand.split(".")[0]; //aeg.dev -> aeg
      }
      brand = brand.toUpperCase();
    }

    return brand;
  } catch (err) {
    throw new Error(`Can not get brand: ${err.message}`);
  }
}
 function getReturnUrlFromUrl(urlSearchParamsObj) {
  try {
    var returnUrl = '';

    if (urlSearchParamsObj && urlSearchParamsObj.has('returnURL')) {
      returnUrl = urlSearchParamsObj.get('returnURL');
    }

    return returnUrl;
  } catch (err) {
    throw new Error(`Can not get return URL: ${err.message}`);
  }
}

      function showresetPassScreen() {
        var params = {
          screenSet: `${cdcApiData.brand}-RegistrationLogin`,
          startScreen: "gigya-reset-password-screen",
	  lang: cdcApiData.language, 
          containerID: "cdc-reset-psw-container"
        };
        gigya.accounts.showScreenSet(params);
      }
    </script>
  </head>

  <body onload="showresetPassScreen()">
    <div id="page-wrapper">
      <div id="cdc-reset-psw-container"></div>
    </div>
  </body>
</html>
